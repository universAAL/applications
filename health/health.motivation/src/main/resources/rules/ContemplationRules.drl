#created on: 21-mar-2012
package contemplation

#list any import classes here.

#declare any global variables here

rule "Reinforce the decission"
	//lanzar cada x d�as (previamente calculado)
	when
		// la fecha se acerque y hasta dos d�as antes y si hoy toca lanzar el mensaje...
	then 
		// mandar mensajes de �sab�as qu�...? (de los que todav�a no se hayan mandado).
		// mensajes sobre los beneficios que obtendr� por seguir el tratamiento.
end

rule "Schedule first session"
	when
		// cuando cambie el estado a contemplation || no se haya realizado la primera sesi�n (hay que recuperarla)
	then 
		// avisar al usuario de que se le ha planificado por defecto la primera sesi�n 
		// y si le viene bien o quiere adecuarla a un momento que le venga mejor. 
end

rule "Re-schedule adjustment" no-loop
	
	when
	// el usuario modifique la primera sesi�n  
	then
	// recalcula la frecuencia para el flujo de refuerzo. 
end

rule "Confirm first-session's planning"
	
	when
		// estemos a dos d�as del tratamiento
	then 
		//Mesaje al usuario: �te viene bien el horario?
end

rule "Advice for first-session's performance" //�descomponer en m�s reglas seg�n el tratamiento?
	
	when
		// estemos a dos d�as del tratamiento
	then 
		// si el tratamiento es physical activity --> enviar mensaje sobre c�mo debe realizar el ejercicio y qu� necesita para llevarlo a cabo.
		// si el tratamiento es de medici�n --> enviar mensaje al usuario sobre c�mo debe realizar la medida e informaci�n sobre lo que se va a medir
		// si el tratamiento es de healthy habits --> enviar mensaje de informaci�n y consejos para logarlo.
end

rule "Remider of first session day"
	
	when
		// sea un d�a antes de comenzar el tratamiento (justo 24h antes)
	then 
		//avisar al usuario para tenerlo todo preparado y la hora y sitio donde debe realizarlo (reminder) y darle �nimos
		//proponerle un trigger de objeto (ya recibir� un reminder tambi�n) para que no se le olvide
		//o se le facilite la acci�n (depender� del tipo de tratamiento)
end

rule "Reminder of first session hour"
	when
		//quede una hora para empezar la sesi�n
	then 
		//se le manda un mensaje al usuario record�ndoselo y d�ndole �nimos
		
end

rule "First Session performed"  no-loop
	#include attributes such as "salience" here...
	
	when
	// se detecte la primera sesi�n realizada 
	then
	//se almacena en un array de sesiones completadas
	//aumenta una unidad la completitud del tratamiento (no hace falta ver qu� sesi�n es la que se ha realizado)
	//comenzar�a el flujo de reglas de action porque cambiar�amos de status.
end

rule "Non-fullfilment of session"  no-loop
	
	when
	// se detecte que la primera sesi�n no ha sido realizada 
	then
	// comienza el flujo de indagaci�n
	// se introduce la sesi�n no realizada en un array de sesiones no realizadas
	// se busca una nueva fecha para la realizaci�n de la tarea.
end

rule "3-times Non-fullfilment of session"  no-loop
	
	when
	// se detecte que la primera sesi�n no ha sido realizada en 3 ocasiones
	//(chequear el n�mero de elementos del array donde se almacenan las sesiones no realizadas).
	then
	// notificamos al caregiver
	// descendemos el estado motivacional a precontemplation.
end

rule "Identify measurement"  no-loop
	
	when
	// se detecte que la primera sesi�n ha sido realizada 
	then
	// identificar el tipo de medida 
end

rule "Check measurement OK" no-loop
	
	when
	// la medida detectada est� dentro de los l�mites de seguridad  
	then
	// mandar los resultados al caregiver
	// y notificar al usuario. 
end